<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Portfolio Rechner — T&amp;T Edelmetalle</title>
  <meta name="robots" content="index, follow" />
  <meta name="description" content="Portfolio Rechner für Gold, Silber, Platin & Palladium. Export als PDF." />
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <header class="navbar container" role="banner">
    <div class="brand" onclick="location.href='index.html'"><span style="color:var(--c-primary)">T&amp;T</span> Edelmetalle</div>
    <nav class="nav-right">
      <a class="nav-link" href="index.html">Start</a>
      <a class="nav-link" href="dashboard.html">Marktübersicht</a>
      <a class="nav-link" href="analysis.html">Wissenswertes</a>
    </nav>
  </header>

  <main class="container" role="main" style="padding-top:18px;">
    <h1>Portfolio Rechner</h1>

    <section id="calculator" aria-labelledby="calculator">
      <div class="grid-dashboard">
        <!-- Left column: Eingabe -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Bestand erweitern</h2>
            <button class="btn btn-outline btn-sm" onclick="clearPortfolio()">Reset</button>
          </div>

          <div class="calc-tabs" style="display:flex;gap:10px;margin-bottom:16px;">
            <div id="tab-cat" class="calc-tab btn btn-sm active" onclick="toggleCalcMode('catalog')" role="button">Katalog Auswahl</div>
            <div id="tab-raw" class="calc-tab btn btn-sm" onclick="toggleCalcMode('raw')" role="button">Manuell (Gramm)</div>
          </div>

          <div id="mode-catalog">
            <label class="input-label">Metallart filtern</label>
            <div style="display:flex; gap:8px; flex-wrap:wrap; margin-bottom:12px;">
              <button class="btn btn-sm btn-outline" onclick="filterCatalog('all')">Alle</button>
              <button class="btn btn-sm btn-outline" style="color:var(--color-gold); border-color:var(--color-gold)" onclick="filterCatalog('gold')">Au</button>
              <button class="btn btn-sm btn-outline" style="color:var(--color-silver); border-color:var(--color-silver)" onclick="filterCatalog('silver')">Ag</button>
              <button class="btn btn-sm btn-outline" style="color:var(--color-plat); border-color:var(--color-plat)" onclick="filterCatalog('platinum')">Pt</button>
              <button class="btn btn-sm btn-outline" style="color:var(--color-pall); border-color:var(--color-pall)" onclick="filterCatalog('palladium')">Pd</button>
            </div>

            <label class="input-label">Produkt wählen</label>
            <div class="select-wrapper">
              <button id="catalogToggle" class="select-toggle" aria-haspopup="listbox" aria-expanded="false">Wähle ein Produkt <i class="fa-solid fa-caret-down"></i></button>
              <ul id="catalogList" class="custom-select-list" role="listbox" hidden></ul>
              <select id="catalogSelect" class="form-control visually-hidden" aria-hidden="true"></select>
            </div>

            <div style="display:flex;gap:10px;margin-top:10px">
              <div style="flex:1">
                <label class="input-label">Anzahl</label>
                <input id="cat-qty" type="number" min="1" value="1" class="form-control">
              </div>
              <div style="flex:1">
                <label class="input-label">Einzelpreis (Est.)</label>
                <input id="cat-price-display" class="form-control" disabled>
              </div>
            </div>
          </div>

          <div id="mode-raw" style="display:none">
            <label class="input-label">Metall</label>
            <select id="raw-metal" class="form-control">
              <option value="gold">Gold</option>
              <option value="silver">Silber</option>
              <option value="platinum">Platin</option>
              <option value="palladium">Palladium</option>
            </select>

            <label class="input-label">Gewicht (Gramm)</label>
            <input id="raw-weight" type="number" class="form-control" placeholder="z.B. 31.1">

            <label class="input-label">Feinheit</label>
            <select id="raw-purity" class="form-control">
              <option value="0.999">999 (Fein)</option>
              <option value="0.916">916 (22k)</option>
              <option value="0.750">750 (18k)</option>
              <option value="0.585">585 (14k)</option>
            </select>
          </div>

          <div style="margin-top:12px;border-top:1px solid var(--c-border);padding-top:14px;display:flex;justify-content:space-between;align-items:center;">
            <div>
              <div class="input-label">Bewertungs-Basis</div>
              <div class="source-badge">Händler-Ankauf</div>
            </div>
            <button class="btn btn-primary" style="width:220px" onclick="addToPortfolio()">Zur Liste hinzufügen</button>
          </div>
        </div>

        <!-- Right column: Portfolio -->
        <div class="card" style="display:flex; flex-direction:column;">
          <div class="card-header">
            <h2 class="card-title">Mein Portfolio</h2>
            <div style="display:flex;align-items:center;gap:10px">
              <div id="port-count" style="color:var(--c-text-muted)">0 Positionen</div>
              <button class="btn btn-outline btn-sm" onclick="exportPortfolioPDF()">Export PDF</button>
            </div>
          </div>

          <div id="portfolio-container" style="flex-grow:1; max-height:420px; overflow:auto;">
            <p style="text-align:center;color:var(--c-text-muted);padding-top:40px">Noch keine Einträge.</p>
          </div>

          <div style="background:rgba(197,160,89,0.08);padding:14px;border-radius:var(--radius-md);border:1px solid rgba(197,160,89,0.12);text-align:right">
            <div class="sub-price">Gesamtwert Portfolio</div>
            <div class="big-price" id="total-value">0,00 €</div>
          </div>
        </div>
      </div>
    </section>

    <div style="display:flex;gap:10px;margin-top:18px;flex-wrap:wrap;">
      <button class="btn btn-outline btn-sm" onclick="openLegal('impressum')">Impressum</button>
      <button class="btn btn-outline btn-sm" onclick="openLegal('haftung')">Haftungsausschluss</button>
      <button class="btn btn-outline btn-sm" onclick="openLegal('datenschutz')">Datenschutz</button>
    </div>
  </main>

  <footer class="footer container">
    <div class="footer-inner">
      <div>&copy; T&amp;T Edelmetalle</div>
      <div class="footer-links">
        <a href="index.html" class="footer-link">Start</a>
        <a href="dashboard.html" class="footer-link">Marktübersicht</a>
        <a href="analysis.html" class="footer-link">Wissenswertes</a>
        <a href="javascript:void(0)" class="footer-link" onclick="openLegal('impressum')">Impressum</a>
        <a href="javascript:void(0)" class="footer-link" onclick="openLegal('datenschutz')">Datenschutz</a>
      </div>
    </div>
  </footer>

  <!-- shared overlays and consent handled by app.js -->
  <script src="assets/js/app.js" defer></script>
</body>
</html>
